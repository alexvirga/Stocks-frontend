(this["webpackJsonpstocks-frontend"]=this["webpackJsonpstocks-frontend"]||[]).push([[0],{36:function(e,t,a){e.exports=a(66)},41:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(32),o=a.n(s),c=(a(41),a(1)),l=a(2),i=a(4),u=a(3),h=a(5),p=a(6),d=a.n(p),m=a(11),g=a(13),f=function(e){return r.a.createElement("div",{className:"Homepage"},r.a.createElement("div",{className:"Homepage-background"}),e.loggedInStatus?null:r.a.createElement("div",{className:"Registration-Container"},r.a.createElement("div",null,r.a.createElement("img",{src:"pipe.png",className:"pipe-logo",alt:""}),r.a.createElement("h1",{className:"Pipeline-title"}," Pipeline Portfolios")),r.a.createElement(m.b,{to:"/login",style:{textDecoration:"none"}},r.a.createElement("div",{className:"box-1"},r.a.createElement("div",{className:"btn btn-registration"},r.a.createElement("span",null,"Login")))),r.a.createElement("br",null),r.a.createElement(m.b,{to:"/signup",style:{textDecoration:"none"}},r.a.createElement("div",{className:"box-2"},r.a.createElement("div",{className:"btn btn-registration"},r.a.createElement("span",null," Sign Up")))),r.a.createElement("br",null)))},v=a(15),k=a.n(v),b=a(17),E=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={ticker:"",search:[],isSearching:!1},a.handleSubmit=function(e){d.a.get("https://cloud.iexapis.com/stable/stock/".concat(e,"/quote?token=").concat("pk_9f00b0223ecf4492b11ddefddd6b2f54")).then((function(e){a.props.handleSearch(e.data),a.setState({search:""})}),(function(e){console.log(e)}))},a.handleChange=function(e){a.setState({ticker:e.target.value}),d.a.get("https://sandbox.iexapis.com/stable/search/".concat(e.target.value,"?token=Tsk_b220f21891584710a33a3e2ca16f2c8e")).then((function(e){a.setState({isSearching:!0,search:e.data})}),(function(e){a.setState({isSearching:!1,search:[]})}))},a.handleClick=function(e){a.setState({isSearching:!1,ticker:""}),a.handleSubmit(e)},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Stock-Search-Container"},r.a.createElement("input",{className:"SearchInput",placeholder:"Search Ticker",type:"text",name:"ticker",value:this.state.ticker.toUpperCase(),onChange:this.handleChange,autoFocus:!0}),this.state.isSearching?r.a.createElement("div",{className:"SearchBar"},r.a.createElement("h4",null," STOCKS "),this.state.search.slice(0,5).map((function(t){return r.a.createElement("p",{key:t.symbol,onClick:function(){return e.handleClick(t.symbol)}},t.symbol)}))):null)}}]),t}(n.Component),y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={shareQty:0,errors:[],error:""},a.performance=function(){return a.props.stock.change<0?"Stock-Down":"Stock-Up"},a.buttonColor=function(){return a.props.stock.change<0?"rgb(255, 127, 127)":a.props.stock.change>0?"#2fe7a5":(a.props.stock.change=0)?"rgb(183, 176, 176)":void 0},a.handleQtyChange=function(e){a.setState({shareQty:e.target.value})},a.handlePurchase=function(){var e=Object(b.a)(k.a.mark((function e(t,n,r,s){var o,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t*r,c=a.props.user.balance-o,e.next=4,d.a.put("https://fast-savannah-59172.herokuapp.com/users/".concat(n.id),{balance:c}).then((function(e){e?(a.props.handlePurchase(e),console.log("created purchase resp",e)):a.setState({errors:e.data.errors})}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),a.postStocktoLedger=function(e,t,n,r){var s=e*n;a.props.user.balance-s<0?a.setState({error:"You don't have enough cash for this transaction"}):(console.log(t),d.a.post("https://fast-savannah-59172.herokuapp.com/trades",{stock:r,user_id:t.id,cost_per_share:e,quantity:n}).then((function(s){"created"===s.data.status?(a.handlePurchase(e,t,n,r),console.log("created",s.data)):(a.setState({errors:s.data.errors}),console.log("created",s.data.errors))})))},a.handleErrors=function(){return r.a.createElement("div",null,a.state.errors.map((function(e){return r.a.createElement("p",{key:e},e)})))},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.stock.changePercent?"(".concat((100*this.props.stock.changePercent).toFixed(2),"%)"):null,a=this.props.stock.change?"$".concat(this.props.stock.change.toFixed(2)):null;return r.a.createElement("div",{className:"StockView"},r.a.createElement("h3",null," ",this.props.stock.symbol," "),r.a.createElement("p",null," ",this.props.stock.companyName," "),r.a.createElement("h2",null," $",this.props.stock.latestPrice," "),r.a.createElement("p",{className:this.performance()},a,"   "," ",t),r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("h3",null," Share Qty: "),r.a.createElement("input",{className:"Qty-Input",type:"number",onChange:this.handleQtyChange})),r.a.createElement("button",{className:"button",style:{verticalAlign:"middle",backgroundColor:this.buttonColor()},onClick:function(){return e.postStocktoLedger(e.props.stock.latestPrice,e.props.user,e.state.shareQty,e.props.stock.symbol)}},r.a.createElement("span",null,"Buy ")),r.a.createElement("div",null,this.state.errors?this.handleErrors():null))}}]),t}(n.Component),S=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Transactions-Container"},this.props.trades.map((function(e){return r.a.createElement("div",{key:e.id,className:"Transaction"},r.a.createElement("h4",null," ",e.stock," "),r.a.createElement("h4",{style:{fontWeight:"normal"}}," ",e.quantity," Share(s) @ $",e.cost_per_share))})))}}]),t}(n.Component),C=a(35),O=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).latestPricePerformance=function(){var e=a.props.liveData.change;return e<0?"Portfolio-Stock-Down":e>0?"Portfolio-Stock-Up":0===e?"Portfolio-Stock-Equal":void 0},a.equityPerformance=function(){var e=a.props.liveData.latestPrice*a.props.trade.quantity,t=a.props.trade.value;return e<t?"Portfolio-Stock-Down":e>t?"Portfolio-Stock-Up":e===t?"Portfolio-Stock-Equal":void 0},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.portfolioToggle?r.a.createElement("div",{key:this.props.trade.stock,className:"Portfolo-Stock-Card"},r.a.createElement("span",{style:{display:"flex",flexDirection:"column",textAlign:"left"}},r.a.createElement("h4",null," ",this.props.trade.stock," "),r.a.createElement("h4",{style:{fontWeight:"normal"}},this.props.trade.quantity," Share(s)")),r.a.createElement("span",{style:{display:"flex",flexDirection:"column",textAlign:"right"}},r.a.createElement("span",{className:this.latestPricePerformance()},r.a.createElement("h4",null," $",this.props.liveData.latestPrice," ")," "),r.a.createElement("h4",{style:{fontWeight:"normal"}}," ",(100*this.props.liveData.changePercent).toFixed(2),"%"))):r.a.createElement("div",{key:this.props.trade.stock,className:"Portfolo-Stock-Card"},r.a.createElement("span",{style:{display:"flex",flexDirection:"column",textAlign:"left"}},r.a.createElement("h4",null," ",this.props.trade.stock," "),r.a.createElement("h4",{style:{fontWeight:"normal"}},this.props.trade.quantity," Share(s)")),r.a.createElement("span",{style:{display:"flex",flexDirection:"column",textAlign:"right"}},r.a.createElement("span",{className:this.equityPerformance()},r.a.createElement("h4",null," ","$",(this.props.liveData.latestPrice*this.props.trade.quantity).toFixed(2)," ")),r.a.createElement("span",{style:{display:"flex",flexDirection:"row",alignContent:"center"}},r.a.createElement("p",null," Cost: "),"\xa0\xa0",r.a.createElement("h4",null,"$",this.props.trade.value.toFixed(2)," ")))),r.a.createElement("hr",null))}}]),t}(n.Component),j=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},stocks:[],stockMap:{},stockArr:[],liveData:[],isLoading:!1},a.fetchPrices=function(e){a.setState({isLoading:!0});var t=Object(C.a)(new Set(e)).toString();d.a.get("https://cloud.iexapis.com/stable/stock/market/batch?symbols=".concat(t,"&types=quote&range=1m&last=5&token=").concat("pk_9f00b0223ecf4492b11ddefddd6b2f54")).then((function(e){return a.setState({liveData:e.data,isLoading:!1})}))},a.handlestocks=function(e){for(var t={},n=[],r=function(a){if(t[e[a].stock]){var r=n.findIndex((function(t){return t.stock===e[a].stock}));n[r].quantity=n[r].quantity+e[a].quantity,n[r].value=n[r].value+e[a].cost_per_share*e[a].quantity,t[e[a].stock]+=e[a].quantity}else n.push({stock:e[a].stock,quantity:e[a].quantity,value:e[a].cost_per_share*e[a].quantity}),t[e[a].stock]=e[a].quantity},s=0;s<e.length;s++)r(s);a.setState({stockArr:n})},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.handlestocks(this.props.trades),this.fetchPrices(this.props.stockArr)}},{key:"componentDidUpdate",value:function(e){e.stockArr!==this.props.stockArr&&(this.handlestocks(this.props.trades),this.fetchPrices(this.props.stockArr))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Portfolio-Container"},this.state.stockArr.length>0&&!this.state.isLoading?this.state.stockArr.map((function(t){return r.a.createElement(O,{portfolioToggle:e.props.portfolioToggle,key:t.stock,trade:t,liveData:e.state.liveData[t.stock].quote})})):null)}}]),t}(n.Component),w=r.a.createContext({user:{}}),N=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){d.a.delete("https://fast-savannah-59172.herokuapp.com/logout",{withCredentials:!0}).then((function(e){a.props.handleLogout(),a.props.history.push("/")})).catch((function(e){return console.log(e)}))},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"update",value:function(){d.a.put("https://fast-savannah-59172.herokuapp.com/users/".concat(this.props.user.id),{balance:4e3}).catch((function(e){return console.log("api errors:",e)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"Navbar"},r.a.createElement("div",{className:"Navbar-menu"},r.a.createElement("img",{src:"pipe.png",className:"pipe-logo-navbar",alt:""}),r.a.createElement("h2",null," Balance: $",this.props.balance," "),r.a.createElement(m.b,{to:"/",onClick:this.handleClick},"Log Out")))}}]),t}(n.Component);N.contextType=w;var x=N,L=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selectedStock:[],viewStock:!1,user:{},trades:[],stockArr:[],isLoading:!0,portfolioToggle:!1},a.handleSearch=function(e){a.setState({viewStock:!0,selectedStock:e})},a.handleStockPurchase=function(){var e=Object(b.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({user:t.data,trades:t.data.trades,stockArr:t.data.trades.map((function(e){return e.stock})),viewStock:!1}),console.log(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),d.a.get("https://fast-savannah-59172.herokuapp.com/users/".concat(this.props.user.id)).then((function(t){return e.setState({user:t.data,trades:t.data.trades,stockArr:t.data.trades.map((function(e){return e.stock})),isLoading:!1})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Dashboard"},r.a.createElement(x,{user:this.state.user,handleLogout:this.props.handleLogout,balance:this.state.user.balance}),r.a.createElement("div",{className:"Stock-Info-Container"},r.a.createElement("div",{className:"Portfilio-Div"},r.a.createElement("h4",null," Portfolio"),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{onClick:function(){return e.setState({portfolioToggle:!1})},className:"toggle-button"},"Equity"),r.a.createElement("button",{onClick:function(){return e.setState({portfolioToggle:!0})},className:"toggle-button"},"Stock Price")),this.state.isLoading?r.a.createElement("h1",null," Loading"):r.a.createElement(j,{user:this.state.user,trades:this.state.trades,stockArr:this.state.stockArr,portfolioToggle:this.state.portfolioToggle})),r.a.createElement("div",{className:"StockSearch"},r.a.createElement(E,{handleSearch:this.handleSearch}),this.state.viewStock?this.state.selectedStock?r.a.createElement(y,{stock:this.state.selectedStock,handlePurchase:this.handleStockPurchase,user:this.state.user}):r.a.createElement("h1",null," Loading "):null),r.a.createElement("div",{className:"Transactions-Div"},r.a.createElement("h4",null," Transactions"),this.state.isLoading?r.a.createElement("h1",null," Loading"):r.a.createElement(S,{user:this.state.user,trades:this.state.trades}))))}}]),t}(n.Component),P=a(18),A=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={email:"",password:"",errors:""},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(P.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n={email:t.email,password:t.password};d.a.post("https://fast-savannah-59172.herokuapp.com/login",{user:n},{withCredentials:!0}).then((function(e){e.data.logged_in?(a.props.handleLogin(e.data),a.redirect()):a.setState({errors:e.data.errors})})).catch((function(e){return console.log("api errors:",e)}))},a.redirect=function(){a.props.history.push("/")},a.handleErrors=function(){return r.a.createElement("div",null,a.state.errors.map((function(e){return r.a.createElement("p",{key:e},e)})))},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentdidlMount",value:function(){return this.props.loggedInStatus?this.redirect():null}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement("div",{className:"Login-Signup-Page"},r.a.createElement("div",{className:"Homepage-background"}),r.a.createElement("div",{className:"Registration-Container"},r.a.createElement("h1",null,"Welcome Back"),r.a.createElement("p",null," Log in to start trading"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{placeholder:"email",className:"Registration-Input",type:"email",name:"email",value:t,onChange:this.handleChange}),r.a.createElement("input",{className:"Registration-Input",placeholder:"password",type:"password",name:"password",value:a,onChange:this.handleChange}),r.a.createElement("button",{placeholder:"submit",type:"submit",className:"btn",style:{margin:"35px 0px 10px 0px"}},r.a.createElement("div",{className:"box-1"},r.a.createElement("div",{className:"btn btn-registration"},r.a.createElement("span",null,"Login")))),r.a.createElement("div",null,"or ",r.a.createElement(m.b,{to:"/signup"},"sign up"))),r.a.createElement("div",null,this.state.errors?this.handleErrors():null)))}}]),t}(n.Component),D=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={username:"",email:"",password:"",password_confirmation:"",errors:""},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(P.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n={username:t.username,email:t.email,password:t.password,password_confirmation:t.password_confirmation};d.a.post("https://fast-savannah-59172.herokuapp.com/users",{user:n},{withCredentials:!0}).then((function(e){"created"===e.data.status?(a.props.handleLogin(e.data),a.redirect()):a.setState({errors:e.data.errors})})).catch((function(e){return console.log("api errors:",e)}))},a.redirect=function(){a.props.history.push("/")},a.handleErrors=function(){return r.a.createElement("div",null,a.state.errors.map((function(e){return r.a.createElement("p",{key:e},e)})))},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.password,s=e.password_confirmation;return r.a.createElement("div",{className:"Login-Signup-Page"},r.a.createElement("div",{className:"Homepage-background"}),r.a.createElement("div",{className:"Registration-Container"},r.a.createElement("h1",null,"Sign Up"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{className:"Registration-Input",placeholder:"name",type:"text",name:"username",value:t,onChange:this.handleChange}),r.a.createElement("input",{placeholder:"email",className:"Registration-Input",type:"email",name:"email",value:a,onChange:this.handleChange}),r.a.createElement("input",{placeholder:"password",className:"Registration-Input",type:"password",name:"password",value:n,onChange:this.handleChange}),r.a.createElement("input",{placeholder:"password confirmation",type:"password",className:"Registration-Input",name:"password_confirmation",value:s,onChange:this.handleChange}),r.a.createElement("button",{placeholder:"submit",type:"submit",className:"btn",style:{margin:"35px 0px 10px 0px"}},r.a.createElement("div",{className:"box-1"},r.a.createElement("div",{className:"btn btn-registration"},r.a.createElement("span",null,"Sign Up")))),r.a.createElement("div",null,"Already a user? ",r.a.createElement(m.b,{to:"/login"}," Log in "))),r.a.createElement("div",null,this.state.errors?this.handleErrors():null)))}}]),t}(n.Component),I=(a(65),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isLoggedIn:!1,user:{}},a.loginStatus=function(){d.a.get("https://fast-savannah-59172.herokuapp.com/logged_in",{withCredentials:!0}).then((function(e){e.data.logged_in?(a.setState({user:e.data.user,isLoggedIn:!0}),a.handleLogin(e.data)):a.handleLogout()})).catch((function(e){return console.log("There has been a database error:",e)}))},a.handleLogin=function(e){a.setState({user:e.user,isLoggedIn:!0})},a.handleLogout=function(){a.setState({isLoggedIn:!1,user:{}})},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loginStatus()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(m.a,null,r.a.createElement(g.a,{exact:!0,path:"/",component:function(){return e.state.isLoggedIn?r.a.createElement(L,{user:e.state.user,handleLogout:e.handleLogout}):r.a.createElement(f,{handleLogout:e.handleLogout,loggedInStatus:e.state.isLoggedIn})}}),r.a.createElement(g.a,{exact:!0,path:"/login",render:function(t){return r.a.createElement(A,Object.assign({},t,{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn}))}}),r.a.createElement(g.a,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(D,Object.assign({},t,{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn}))}})))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.1020f77c.chunk.js.map